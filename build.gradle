apply plugin: 'java'
apply plugin: 'jacoco'
apply plugin: 'coveralls'

def defaultEncoding = 'UTF-8'

[compileJava, compileTestJava]*.options*.encoding = defaultEncoding

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    testCompile "junit:junit:4.12"
}

jacoco {
    toolVersion = "0.7.+"
    // reportsDir = file("$buildDir/reports/jacoco")
}

task jacoco(type: JacocoReport, dependsOn: 'test') {
    sourceSets sourceSets.main
    executionData = files(tasks.jacocoTestReport.executionData)
    reports {
        html.enabled = true
        xml.enabled = true
        csv.enabled = true
    }
}

dependencies {
    classpath 'org.kt3k.gradle.plugin:coveralls-gradle-plugin:0.4.0'
}

coveralls.jacocoReportPath = 'build/reports/coverage/debug/report.xml'